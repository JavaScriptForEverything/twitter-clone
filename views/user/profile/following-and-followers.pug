extends ../../layout/mainLayout
block content
	include ../../icon/icons
	include ../../components/mui/@index
	include ../../components/@index

	style.
		body {
			--blue-500: #3b82f6;
			--blue-600: #2563eb;
		}
		.tab-active {
			border-bottom: 1px solid var(--blue-500);
			color: var(--blue-500);
			font-weight: bold;
		}


	div(class='grid grid-cols-12 p-2 divide-x')
		//- left-section
		div(class='col-span-2')
			+NavComponent()


		//- middle-section
		div(class='col-span-10 md:col-span-7')
			h1(class='p-2 border-b border-slate-200 text-slate-900 font-bold') #{profileUser.username}

			//- Posts & Reply Section 
			div(class='border border-slate-100 shadow-sm mt-4')
				nav(name='tab-container' class='grid grid-cols-2 ')
					p(id=0 class='tab-active hover:bg-blue-100 text-center p-2 cursor-pointer') Following
					p(id=1 class='hover:bg-blue-100 text-center p-2 cursor-pointer') Followers


				div(name='tab-content-container' class='border border-blue-500 py-1.5 px-3 mb-10')
					//- each tweet in user.tweets
						//- +Tweet(tweet)
					
					div(class='tab-item' hidden=false id='0') Following
					div(class='tab-item' hidden id='1') Followers





		//- right-section
		div(class='hidden md:col-span-3')
			p right section hiddend for now
	

	script.
		const logedInUser = !{ JSON.stringify(logedInUser) } 	
		const profileUser = !{ JSON.stringify(profileUser) } 	


		const url = new URL(location.href) 
		const tabName = url.pathname.split('/').pop()
		if(tabName === 'followers') {
			$('[name=tab-container]').children[0].classList.remove('tab-active')
			$('[name=tab-container]').children[1].classList.add('tab-active')

			$('[name=tab-content-container]').children[0].hidden=true
			$('[name=tab-content-container]').children[1].hidden=false
		}

		//- // show follow button only others user, not self user
		//- const followContainer = $('[name=follow-container]')
		//- followContainer.classList.toggle('invisible', profileUser.username === logedInUser.username )


		//-----[ Tabs container ]-----
		$('[name=tab-container]').addEventListener('click', (evt) => {

			// Step-1: add active tab style
			Array.from(evt.currentTarget.children).forEach( (tab, index) => {
				tab.classList.toggle('tab-active', +evt.target.id === index)
			}) 

			// Step-2: Show Active Tab content
			Array.from( document.querySelectorAll('.tab-item') ).forEach((tabItem, index) => {
				tabItem.hidden = evt.target.id !== index.toString()
			})
		})




	//- script(src="/js/userProfile.js") 


