extends layout/mainLayout
block content
	include icon/icons
	include components/mui/@index
	include components/@index




	div(class='grid grid-cols-12 p-2 divide-x')
		//- left-section
		div(class='col-span-2')
			+NavComponent()

		//- middle-section
		div(class='col-span-10 md:col-span-7')

			p(class='p-2 border-b border-slate-200') #{pageTitle}
			div(class='p-2 text-slate-700 flex gap-4 mb-8')
				+Avatar({ src: user.avatar })
				div(class='[&>button]:mt-2 flex-1')
					+Textarea({ name: 'tween' })
					+Button({ value: 'Tween', disabled: false })

			section#reply-dialog-container
				+RetweetModal({
					fullName: 'Riajul Islam',
					username: 'riajulislam',
					createdAt: timeSince( new Date( ) ),
					avatar: '/images/users/default.jpg',
					replyAvatar: '/images/users/default.jpg',
					tweet: 'hi there, it way an awesome tweets',
					numberOfHeart: 1,
					numberOfRetweet: 1,
				})

			//- tweets container to show tweets after fetch from backend 
			section#pinned-tweets-container
				hr(class='bg-slate-200 h-0.5')

			section#tweets-container




		//- right-section
		div(class='hidden md:col-span-3')
			p right section hiddend for now




	script(nonce=cspNonce).

		//                                           		// (1) user comes from Server-Side: res.render('/', payload)
		let logedInUser = !{JSON.stringify( user )} 		// (2) Passing Server-Side variable to Client-Side
		//- console.log(logedInUser) 										// (3) Now logedInUser is Client-side variable


		//- styleOnTweetIconClick({ event: evt, tweet, user: logedInUser, selector: '#heart' })
		const styleOnTweetIconClick = ({ event, tweet, user, selector='#heart' }) => {

			const isLiked = tweet.likes.includes(user._id)
			if( isLiked ) {
				event.target.style.fill = 'red' 
				//- event.target.classList.add('fill-red-500') 			// use self class TailwindClass not works
				$(`:scope ${selector} + span`).textContent = tweet?.likes.length

			} else {
				event.target.style.fill = '' 
				$(`:scope ${selector} + span`).textContent = tweet?.likes.length
			}
		}

	script(src="/js/home.js") 
