extends layout/mainLayout
block content

	.h-screen.flex.justify-center.items-center
		.w-96.bg-slate-100.m-auto.px-4.py-3.shadow-md.rounded
			h1.mb-8.text-center.text-blue-600 Register
			form.flex.flex-col.gap-3.mb-4(method='post')

				h2.text-red-500.text-center.capitalize #{errorMessage}

				input.p-2(type="text", name="username" placeholder='username' value=username required=true)
				input.p-2(type="email", name="email" placeholder='abc@gmail.com' value=email required=true)
				input.p-2(type="password", name="password" placeholder='your password' value=password required=true)
				input.p-2(type="password", name="confirmPassword" placeholder='your confirm password' value=confirmPassword required=true)
				button.p-2.bg-blue-500.text-white(type="submit") Register
			
			.text-center
				a.text-blue-500.underline.decoration-dotted(href="/login") Already have an account ? login here

	script.
		$('form').addEventListener('submit', (evt) => {
			evt.preventDefault()

			const formData = new FormData(evt.target)
			const fields = Object.fromEntries( formData )

			if( fields.password !== fields.confirmPassword ) {
				$('[name=confirmPassword]').style.border = '1px solid red'
				return
			}

			$('[name=confirmPassword]').style.border = ''

			/* it will submit the form by the: 	<form method='post'>
			** No need `fetch('/register', { method: 'post' , ...})`
			*/ 
			evt.target.submit() 	// form.submit()
		})
